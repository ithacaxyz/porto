import { Address } from 'ox'
import { describe, expect, test } from 'vitest'

import * as Call from './call.js'
import * as Key from './key.js'

describe('authorize', () => {
  test('default', () => {
    const key = Key.fromP256({
      privateKey:
        '0x59ff6b8de3b3b39e94b6f9fc0590cf4e3eaa9b6736e6a49c9a6b324c4f58cb9f',
      role: 'admin',
    })

    const call = Call.authorize({
      key,
      to: Address.from('0x0000000000000000000000000000000000000000'),
    })

    expect(call).toMatchInlineSnapshot(`
      {
        "data": "0xcebfe33600000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000004104ec0effa5f2f378cbf7fd2fa7ca1e8dc51cf777c129fa1c00a0e9a9205f2e511ff3f20b34a4e0b50587d055c0e0fad33d32cf1147d3bb2538fbab0d15d8e6500800000000000000000000000000000000000000000000000000000000000000",
        "to": "0x0000000000000000000000000000000000000000",
      }
    `)
  })
})

describe('setLabel', () => {
  test('default', () => {
    const call = Call.setLabel({
      label: 'test',
      to: Address.from('0x0000000000000000000000000000000000000000'),
    })

    expect(call).toMatchInlineSnapshot(`
      {
        "data": "0xbf530969000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000047465737400000000000000000000000000000000000000000000000000000000",
        "to": "0x0000000000000000000000000000000000000000",
      }
    `)
  })
})

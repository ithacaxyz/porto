import { TryItOut } from '../../../components/TryItOut'

# `usePermissions`

Hook for retrieving active permissions for an account.

Uses [`experimental_getPermissions`](/sdk/rpc/experimental_getPermissions) under the hood.

<TryItOut
  exampleSlug="#example"
  fn={({ provider }) => provider.request({ method: 'experimental_getPermissions' })}
  transformResultCode={(code) => {
    return 'const response = ' + code
  }}
/>

## Example

```tsx twoslash
import { Porto } from 'porto'
import * as React from 'react'
import { Hooks } from 'porto/wagmi'

const porto = Porto.create()

export function App() {
  const permissions = Hooks.usePermissions()

  if (permissions.isLoading) return <div>Loading permissions...</div>
  if (permissions.isError) return <div>Error loading permissions</div>

  return (
    <div>
      <h2>Active Permissions</h2>
      {permissions.data && permissions.data.length > 0 ? (
        <ul>
          {permissions.data.map((permission) => (
            <li key={permission.id}>
              <div>ID: {permission.id}</div>
              <div>Expiry: {new Date(permission.expiry * 1000).toLocaleString()}</div>
              <div>
                <strong>Calls:</strong>
                <ul>
                  {permission.permissions.calls.map((call, i) => (
                    <li key={i}>
                      {call.to && <div>To: {call.to}</div>}
                      {call.signature && <div>Signature: {call.signature}</div>}
                    </li>
                  ))}
                </ul>
              </div>
              <div>
                <strong>Spend:</strong>
                <ul>
                  {permission.permissions?.spend?.map((spend, i) => (
                    <li key={i}>
                      <div>Limit: {spend.limit.toString()}</div>
                      <div>Period: {spend.period}</div>
                      {spend.token && <div>Token: {spend.token}</div>}
                    </li>
                  ))}
                </ul>
              </div>
            </li>
          ))}
        </ul>
      ) : (
        <div>No active permissions</div>
      )}
    </div>
  )
}
```

<TryItOut
  fn={({ provider }) => provider.request({ method: 'experimental_getPermissions' })}
  transformResultCode={(code) => {
    return 'const response = ' + code
  }}
/>

### Query Specific Account

You can query permissions for a specific account by passing an address:

```tsx twoslash
import { Porto } from 'porto'
import * as React from 'react'
import { Hooks } from 'porto/wagmi'

const porto = Porto.create()

export function App() {
  const specificAddress = '0x123...' // [!code focus]
  const permissions = Hooks.usePermissions({
    address: specificAddress // [!code focus]
  })

  if (permissions.isLoading) return <div>Loading permissions...</div>
  if (permissions.isError) return <div>Error loading permissions</div>

  return (
    <div>
      <h2>Active Permissions for {specificAddress}</h2>
      {/* Display permissions as in the previous example */}
    </div>
  )
}
```
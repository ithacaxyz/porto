import { TryItOut } from '../../../../components/TryItOut'

# `Porto.create`

Creates a new Porto instance.

## Imports

:::code-group

```ts [Named]
import { Porto } from 'porto'
```

```ts [Entrypoint]
import * as Porto from 'porto/Porto'
```

:::

## Examples

The simplest way to create a new Porto instance is to call the `Porto.create(){:ts}` function. 
This will automatically inject Porto's provider into your Application via [EIP-6963](https://eips.ethereum.org/EIPS/eip-6963).

```ts twoslash
import { Porto } from 'porto'

Porto.create()
```

:::tip
You can turn off announcement of the provider by passing `announceProvider: false{:ts}` as an option.

```ts twoslash
import { Porto } from 'porto'

const porto = Porto.create({ announceProvider: false })
```


:::

### Accessing the Provider

You can access Porto's [EIP-1193 Provider](https://eips.ethereum.org/EIPS/eip-1193) directly via the `provider` instance.

```ts twoslash
import { Porto } from 'porto'

const porto = Porto.create()

const accounts = await porto.provider.request({
  method: 'wallet_connect',
})
```

<TryItOut
  fn={async ({ provider }) => {
    const accounts = await provider.request({
      method: 'wallet_connect',
    })
    return accounts
  }}
  transformResultCode={(code) => {
    return 'const accounts = ' + code
  }}
/>

### Modes

Porto supports different integration modes that determine how requests and signing operations are handled:

- **Dialog Mode**: The default mode that uses an iframe or popup dialog for all operations.
- **Contract Mode**: Locally handles all requests and signing, coordinating with a delegation contract.
- **Relay Mode**: Locally handles requests and signing, coordinating with the Porto Relay service.

Each mode has different tradeoffs in terms of user experience, security, and implementation complexity. See the Mode parameter section below for more details.

### Storage

Porto needs to store data like user accounts and session information. Several storage options are available:

- **IndexedDB (Default)**: Provides persistent storage with larger storage limits (≈50MB).
- **LocalStorage**: Uses the browser's built-in localStorage with lower storage limits (≈5MB).
- **Memory**: Stores data in-memory, which is cleared when the page refreshes.
- **Cookie**: Uses document.cookie for storage with very limited capacity.

Choose a storage option based on your application's needs for persistence and storage capacity.

### Custom Chains

Porto is designed to work with multiple blockchain networks through its chain configuration. You can specify custom chains beyond the default ones:

```ts twoslash
import { Porto, Chains } from 'porto'

// Define a custom chain
const myCustomChain = Chains.define({
  id: 1337,
  name: 'My Custom Chain',
  nativeCurrency: {
    name: 'Ether',
    symbol: 'ETH',
    decimals: 18,
  },
  rpcUrls: {
    default: {
      http: ['https://my-custom-chain-rpc.example.com'],
    },
  },
  contracts: {
    accountRegistry: {
      address: '0x1234567890123456789012345678901234567890',
    },
    delegation: {
      address: '0x0987654321098765432109876543210987654321',
    },
    entryPoint: {
      address: '0xabcdef0123456789abcdef0123456789abcdef01',
    },
  },
})

// Create Porto instance with custom chain
const porto = Porto.create({
  chains: [myCustomChain],
})
```

The chain configuration includes the chain ID, name, native currency details, RPC endpoints, and contract addresses needed for Porto's functionality.

## Parameters

### announceProvider

- **Type:** `boolean{:ts}`
- **Default:** `true{:ts}`

Whether to announce the provider via [EIP-6963](https://eips.ethereum.org/EIPS/eip-6963).

### chains

- **Type:** `readonly [Chains.Chain, ...Chains.Chain[]]{:ts}`
- **Default:** `[Chains.odysseyTestnet]{:ts}`

List of supported chains.

:::tip
See [`Chains`](#TODO) for a list of Porto-supported chains.
:::

### mode

- **Type:** `Mode.Mode{:ts}`
- **Default:** `Mode.dialog(){:ts}`

Mode to use.

Available:

- [`Mode.contract()`](#TODO): Requests & signing is handled locally, and coordinated with the delegation contract.
- [`Mode.dialog()`](#TODO): Requests & signing is handled via an iframe or popup dialog.
- [`Mode.relay()`](#TODO): Requests & signing is handled locally, and coordinated with the Porto Relay.

:::warning
Using `Mode.contract()` or `Mode.relay()` comes with some caveats. Please refer to the [`Mode.contract()`](#TODO) or [`Mode.relay()`](#TODO) documentation for more information.
:::

### storage

- **Type:** `Storage.Storage{:ts}`
- **Default:** `Storage.idb(){:ts}`

Storage to use.

Available:

- [`Storage.idb()`](#TODO): Uses IndexedDB
- [`Storage.memory()`](#TODO): Uses In-memory store
- [`Storage.localStorage()`](#TODO): Uses `window.localStorage{:ts}`
- [`Storage.cookie()`](#TODO): Uses `document.cookie{:ts}`

### transports

- **Type:** `{ [chainId: string]: Transport | { default: Transport; relay?: Transport | undefined } }{:ts}`
- **Default:** `{}{:ts}`

Transport to use for each chain.

## Return Type

`Porto{:ts}`

The Porto instance.
